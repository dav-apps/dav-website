<!DOCTYPE html>
<html lang="<%= lang %>">
	<head>
		<title>dav</title>
		<base href="/">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="env" content="<%= process.env.ENV %>">
		<meta name="csrf-token" content="<%= csrfToken %>">

		<link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="../../styles.scss">
		<link rel="stylesheet" href="user-page.scss">
		<link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="/node_modules/office-ui-fabric-core/dist/css/fabric.min.css">
		<link rel="stylesheet" href="/node_modules/cropperjs/dist/cropper.min.css">

		<script type="module" src="user-page.ts" defer async></script>
	</head>
	<body dir="ltr">
		<include src="src/components/navbar-component/navbar-component.html"></include>

		<dav-sidenav-container>
			<dav-sidenav>
				<div style="height: 80px"></div>

				<dav-sidenav-item
					id="general-sidenav-item"
					value="<%= locale.sideNav.general %>"
					link="/user">
				</dav-sidenav-item>

				<dav-sidenav-item
					id="plans-sidenav-item"
					value="<%= locale.sideNav.plans %>"
					link="/user#dev">
				</dav-sidenav-item>
			</dav-sidenav>

			<div id="container">
				<!-- General settings -->
				<div id="general-container" class="page-container pt-4 d-none">
					<h1 class="text-center fw-light mb-4"><%= locale.general.title %></h1>

					<div class="d-flex flex-column align-items-center">
						<div id="message-bar-container-general">
							<div class="mb-4 d-none">
								<dav-message-bar
									id="error-message-bar-general"
									type="danger">
								</dav-message-bar>
							</div>

							<div class="mb-4 d-none">
								<dav-message-bar
									id="success-message-bar-general"
									type="success">
								</dav-message-bar>
							</div>

							<!-- Profile image -->
							<div class="mb-3">
								<dav-progress-ring
									id="profile-image-progress-ring"
									class="d-none">
								</dav-progress-ring>

								<img
									id="profile-image"
									class="img rounded"
									src="<%= user.ProfileImage %>"
									alt="<%= locale.general.profileImageAlt %>"
									height="150"
									width="150">
							</div>

							<dav-button
								id="upload-profile-image-button"
								type="accent">
								<%= locale.general.uploadProfileImage %>
							</dav-button>

							<!-- First name -->
							<form>
								<div class="mt-4 d-flex">
									<dav-textfield
										id="first-name-textfield"
										value="<%= user.FirstName %>"
										label="<%= locale.general.firstNameTextfieldLabel %>"
										placeholder="<%= locale.general.firstNameTextfieldPlaceholder %>"
										autocomplete="given-name">
									</dav-textfield>

									<button
										id="first-name-save-button"
										class="btn btn-sm ms-2 icon-button d-none"
										type="button">
										<i class="ms-Icon ms-Icon--Save" aria-hidden="true" style="font-size: 16px"></i>
									</button>

									<dav-progress-ring
										id="first-name-progress-ring"
										class="d-none"
										style="margin: 33px 0 0 14px; width: 16px; height: 16px">
									</dav-progress-ring>
								</div>
							</form>

							<!-- Email -->
							<form>
								<div class="mt-4 d-flex">
									<dav-textfield
										id="email-textfield"
										value="<%= user.Email %>"
										label="<%= locale.general.emailTextfieldLabel %>"
										placeholder="<%= locale.general.emailTextfieldPlaceholder %>"
										type="email"
										autocomplete="email">
									</dav-textfield>

									<button
										id="email-save-button"
										class="btn btn-sm ms-2 icon-button d-none"
										type="button">
										<i class="ms-Icon ms-Icon--Save" aria-hidden="true" style="font-size: 16px"></i>
									</button>

									<dav-progress-ring
										id="email-progress-ring"
										class="d-none"
										style="margin: 33px 0 0 14px; width: 16px; height: 16px">
									</dav-progress-ring>
								</div>
							</form>

							<!-- Password -->
							<form>
								<div class="mt-4 d-flex flex-column" style="width: 200px">
									<dav-textfield
										id="password-textfield"
										label="<%= locale.general.passwordTextfieldLabel %>"
										placeholder="<%= locale.general.passwordTextfieldPlaceholder %>"
										type="password"
										autocomplete="new-password">
									</dav-textfield>

									<div class="mt-3">
										<dav-textfield
											id="password-confirmation-textfield"
											label="<%= locale.general.passwordConfirmationTextfieldLabel %>"
											placeholder="<%= locale.general.passwordConfirmationTextfieldPlaceholder %>"
											type="password"
											autocomplete="new-password">
										</dav-textfield>
									</div>

									<div class="d-flex">
										<dav-button
											id="password-save-button"
											class="mt-3"
											type="accent">
											<%= locale.save %>
										</dav-button>

										<dav-progress-ring
											id="password-progress-ring"
											class="d-none"
											style="margin: 24px 0px 0px 14px; width: 16px; height: 16px">
										</dav-progress-ring>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>

				<!-- Plans -->
				<div id="plans-container" class="page-container pt-4 d-none">
					<h1 class="text-center fw-light mb-4"><%= locale.plans.title %></h1>
				</div>

				<aside class="mdc-snackbar">
					<div class="mdc-snackbar__surface" role="status" aria-relevant="additions">
						<div id="snackbar-label" class="mdc-snackbar__label" aria-atomic="false"></div>
					</div>
				</aside>
			</div>
		</dav-sidenav-container>

		<dav-dialog
			id="profile-image-dialog"
			header="<%= locale.general.profileImageDialog.header %>"
			primaryButtonText="<%= locale.save %>"
			defaultButtonText="<%= locale.cancel %>">

			<div class="mb-3" style="max-height: 400px;">
				<img id="profile-image-dialog-image" style="max-width: 100%">
			</div>
		</dav-dialog>
	</body>
</html>